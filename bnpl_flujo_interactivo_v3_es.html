<!doctype html>
<html lang="es-mx"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Flujograma BNPL — MP‑only (sin RyC)</title>
<link rel="stylesheet" href="bnpl_fluxo_interativo_pt.css">
</head>
<body>
<header>
  <h1>Flujograma — Gestión → In‑store → Post‑compra</h1>
  <span class="pill">POS siempre débito</span>
  <span class="pill">Funding JIT (saldo + BNPL)</span>
  <span class="pill">Sin RyC: pantalla de éxito</span>
</header>
<main class="board" style="display:grid;grid-template-columns:1.2fr .8fr;gap:18px;padding:18px;max-width:1400px;margin:0 auto;">
  <div class="canvas"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: BNPL_FLOW_ES_V3 Pages: 1 -->
<svg width="2199pt" height="114pt"
 viewBox="0.00 0.00 2199.00 114.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 110)">
<title>BNPL_FLOW_ES_V3</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-110 2195,-110 2195,4 -4,4"/>
<text text-anchor="middle" x="1095.5" y="-94" font-family="Times,serif" font-size="10.00">BNPL — Gestión → In‑store → Post‑compra (POS débito; funding JIT; sin RyC)</text>
<g id="clust1" class="cluster">
<title>cluster_user</title>
<path fill="none" stroke="#bbd7ff" stroke-dasharray="5,2" d="M20,-8C20,-8 650,-8 650,-8 656,-8 662,-14 662,-20 662,-20 662,-67 662,-67 662,-73 656,-79 650,-79 650,-79 20,-79 20,-79 14,-79 8,-73 8,-67 8,-67 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text text-anchor="middle" x="335" y="-67" font-family="Times,serif" font-size="10.00">Gestión (App MP)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_pos</title>
<path fill="none" stroke="#bbd7ff" stroke-dasharray="5,2" d="M694,-8C694,-8 1016,-8 1016,-8 1022,-8 1028,-14 1028,-20 1028,-20 1028,-67 1028,-67 1028,-73 1022,-79 1016,-79 1016,-79 694,-79 694,-79 688,-79 682,-73 682,-67 682,-67 682,-20 682,-20 682,-14 688,-8 694,-8"/>
<text text-anchor="middle" x="855" y="-67" font-family="Times,serif" font-size="10.00">POS → Adquirente → Red</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_backend</title>
<path fill="none" stroke="#bbd7ff" stroke-dasharray="5,2" d="M1060,-8C1060,-8 1457,-8 1457,-8 1463,-8 1469,-14 1469,-20 1469,-20 1469,-67 1469,-67 1469,-73 1463,-79 1457,-79 1457,-79 1060,-79 1060,-79 1054,-79 1048,-73 1048,-67 1048,-67 1048,-20 1048,-20 1048,-14 1054,-8 1060,-8"/>
<text text-anchor="middle" x="1258.5" y="-67" font-family="Times,serif" font-size="10.00">Backend MP (orquestación)</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_post</title>
<path fill="none" stroke="#bbd7ff" stroke-dasharray="5,2" d="M1501,-8C1501,-8 2171,-8 2171,-8 2177,-8 2183,-14 2183,-20 2183,-20 2183,-67 2183,-67 2183,-73 2177,-79 2171,-79 2171,-79 1501,-79 1501,-79 1495,-79 1489,-73 1489,-67 1489,-67 1489,-20 1489,-20 1489,-14 1495,-8 1501,-8"/>
<text text-anchor="middle" x="1836" y="-67" font-family="Times,serif" font-size="10.00">Post‑compra (App MP)</text>
</g>
<!-- preset_funding -->
<g id="node1" class="node">
<title>preset_funding</title>
<path fill="#e8f1ff" stroke="#0c6cf2" stroke-width="1.6" d="M153,-52C153,-52 28,-52 28,-52 22,-52 16,-46 16,-40 16,-40 16,-28 16,-28 16,-22 22,-16 28,-16 28,-16 153,-16 153,-16 159,-16 165,-22 165,-28 165,-28 165,-40 165,-40 165,-46 159,-52 153,-52"/>
<text text-anchor="middle" x="90.5" y="-37.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Preset de funding</text>
<text text-anchor="middle" x="90.5" y="-25.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">100% BNPL / split / fallback</text>
</g>
<!-- preset_cuotas -->
<g id="node2" class="node">
<title>preset_cuotas</title>
<path fill="#e8f1ff" stroke="#0c6cf2" stroke-width="1.6" d="M366,-52C366,-52 213,-52 213,-52 207,-52 201,-46 201,-40 201,-40 201,-28 201,-28 201,-22 207,-16 213,-16 213,-16 366,-16 366,-16 372,-16 378,-22 378,-28 378,-28 378,-40 378,-40 378,-46 372,-52 366,-52"/>
<text text-anchor="middle" x="289.5" y="-37.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Cuotas 1–12x (default 3x)</text>
<text text-anchor="middle" x="289.5" y="-25.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Tasa prefijada • precio por $1,000</text>
</g>
<!-- preset_funding&#45;&gt;preset_cuotas -->
<g id="edge1" class="edge">
<title>preset_funding&#45;&gt;preset_cuotas</title>
<path fill="none" stroke="black" d="M165.14,-34C173.54,-34 182.2,-34 190.86,-34"/>
<polygon fill="black" stroke="black" points="191,-37.5 201,-34 191,-30.5 191,-37.5"/>
</g>
<!-- activar -->
<g id="node3" class="node">
<title>activar</title>
<path fill="#e8f1ff" stroke="#0c6cf2" stroke-width="1.6" d="M642,-52C642,-52 426,-52 426,-52 420,-52 414,-46 414,-40 414,-40 414,-28 414,-28 414,-22 420,-16 426,-16 426,-16 642,-16 642,-16 648,-16 654,-22 654,-28 654,-28 654,-40 654,-40 654,-46 648,-52 642,-52"/>
<text text-anchor="middle" x="534" y="-31.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Activar Tap MP (NFC) • Tarjeta de débito física</text>
</g>
<!-- preset_cuotas&#45;&gt;activar -->
<g id="edge2" class="edge">
<title>preset_cuotas&#45;&gt;activar</title>
<path fill="none" stroke="black" d="M378.05,-34C386.43,-34 395.05,-34 403.73,-34"/>
<polygon fill="black" stroke="black" points="403.93,-37.5 413.93,-34 403.93,-30.5 403.93,-37.5"/>
</g>
<!-- tap -->
<g id="node4" class="node">
<title>tap</title>
<path fill="#fff8dd" stroke="#0c6cf2" stroke-width="1.6" d="M815,-52C815,-52 702,-52 702,-52 696,-52 690,-46 690,-40 690,-40 690,-28 690,-28 690,-22 696,-16 702,-16 702,-16 815,-16 815,-16 821,-16 827,-22 827,-28 827,-28 827,-40 827,-40 827,-46 821,-52 815,-52"/>
<text text-anchor="middle" x="758.5" y="-31.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Tap/Tarjeta en la terminal</text>
</g>
<!-- activar&#45;&gt;tap -->
<g id="edge3" class="edge">
<title>activar&#45;&gt;tap</title>
<path fill="none" stroke="black" d="M654.07,-34C662.81,-34 671.48,-34 679.88,-34"/>
<polygon fill="black" stroke="black" points="679.96,-37.5 689.96,-34 679.96,-30.5 679.96,-37.5"/>
</g>
<!-- debito -->
<g id="node5" class="node">
<title>debito</title>
<path fill="#fff8dd" stroke="#0c6cf2" stroke-width="1.6" d="M1008,-52C1008,-52 875,-52 875,-52 869,-52 863,-46 863,-40 863,-40 863,-28 863,-28 863,-22 869,-16 875,-16 875,-16 1008,-16 1008,-16 1014,-16 1020,-22 1020,-28 1020,-28 1020,-40 1020,-40 1020,-46 1014,-52 1008,-52"/>
<text text-anchor="middle" x="941.5" y="-31.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Flujo de débito (para el POS)</text>
</g>
<!-- tap&#45;&gt;debito -->
<g id="edge4" class="edge">
<title>tap&#45;&gt;debito</title>
<path fill="none" stroke="black" d="M827.16,-34C835.53,-34 844.18,-34 852.79,-34"/>
<polygon fill="black" stroke="black" points="852.88,-37.5 862.88,-34 852.88,-30.5 852.88,-37.5"/>
</g>
<!-- calc -->
<g id="node6" class="node">
<title>calc</title>
<path fill="#f8fbff" stroke="#0c6cf2" stroke-width="1.6" d="M1235,-52C1235,-52 1068,-52 1068,-52 1062,-52 1056,-46 1056,-40 1056,-40 1056,-28 1056,-28 1056,-22 1062,-16 1068,-16 1068,-16 1235,-16 1235,-16 1241,-16 1247,-22 1247,-28 1247,-28 1247,-40 1247,-40 1247,-46 1241,-52 1235,-52"/>
<text text-anchor="middle" x="1151.5" y="-37.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Aplicar preset → split (saldo+BNPL)</text>
<text text-anchor="middle" x="1151.5" y="-25.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Funding JIT (top‑up cuenta)</text>
</g>
<!-- debito&#45;&gt;calc -->
<g id="edge5" class="edge">
<title>debito&#45;&gt;calc</title>
<path fill="none" stroke="black" d="M1020.25,-34C1028.62,-34 1037.24,-34 1045.87,-34"/>
<polygon fill="black" stroke="black" points="1045.98,-37.5 1055.98,-34 1045.98,-30.5 1045.98,-37.5"/>
</g>
<!-- auth -->
<g id="node7" class="node">
<title>auth</title>
<path fill="#f8fbff" stroke="#0c6cf2" stroke-width="1.6" d="M1449,-52C1449,-52 1295,-52 1295,-52 1289,-52 1283,-46 1283,-40 1283,-40 1283,-28 1283,-28 1283,-22 1289,-16 1295,-16 1295,-16 1449,-16 1449,-16 1455,-16 1461,-22 1461,-28 1461,-28 1461,-40 1461,-40 1461,-46 1455,-52 1449,-52"/>
<text text-anchor="middle" x="1372" y="-37.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Autorizar como Dinero en Cuenta</text>
<text text-anchor="middle" x="1372" y="-25.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">(valor total al POS)</text>
</g>
<!-- calc&#45;&gt;auth -->
<g id="edge6" class="edge">
<title>calc&#45;&gt;auth</title>
<path fill="none" stroke="black" d="M1247.07,-34C1255.6,-34 1264.27,-34 1272.83,-34"/>
<polygon fill="black" stroke="black" points="1272.84,-37.5 1282.84,-34 1272.84,-30.5 1272.84,-37.5"/>
</g>
<!-- congrats -->
<g id="node8" class="node">
<title>congrats</title>
<path fill="#e8f1ff" stroke="#0c6cf2" stroke-width="1.6" d="M1623,-52C1623,-52 1509,-52 1509,-52 1503,-52 1497,-46 1497,-40 1497,-40 1497,-28 1497,-28 1497,-22 1503,-16 1509,-16 1509,-16 1623,-16 1623,-16 1629,-16 1635,-22 1635,-28 1635,-28 1635,-40 1635,-40 1635,-46 1629,-52 1623,-52"/>
<text text-anchor="middle" x="1566" y="-31.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Pantalla de éxito + recibo</text>
</g>
<!-- auth&#45;&gt;congrats -->
<g id="edge7" class="edge">
<title>auth&#45;&gt;congrats</title>
<path fill="none" stroke="black" d="M1461.13,-34C1469.68,-34 1478.32,-34 1486.76,-34"/>
<polygon fill="black" stroke="black" points="1486.95,-37.5 1496.95,-34 1486.95,-30.5 1486.95,-37.5"/>
</g>
<!-- gestion -->
<g id="node9" class="node">
<title>gestion</title>
<path fill="#e8f1ff" stroke="#0c6cf2" stroke-width="1.6" d="M1870,-52C1870,-52 1683,-52 1683,-52 1677,-52 1671,-46 1671,-40 1671,-40 1671,-28 1671,-28 1671,-22 1677,-16 1683,-16 1683,-16 1870,-16 1870,-16 1876,-16 1882,-22 1882,-28 1882,-28 1882,-40 1882,-40 1882,-46 1876,-52 1870,-52"/>
<text text-anchor="middle" x="1776.5" y="-37.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Gestionar transacción (aumentar cuotas,</text>
<text text-anchor="middle" x="1776.5" y="-25.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">prepago, adelantar)</text>
</g>
<!-- congrats&#45;&gt;gestion -->
<g id="edge8" class="edge">
<title>congrats&#45;&gt;gestion</title>
<path fill="none" stroke="black" d="M1635.27,-34C1643.47,-34 1652,-34 1660.63,-34"/>
<polygon fill="black" stroke="black" points="1660.79,-37.5 1670.79,-34 1660.79,-30.5 1660.79,-37.5"/>
</g>
<!-- plan -->
<g id="node10" class="node">
<title>plan</title>
<path fill="#e8f1ff" stroke="#0c6cf2" stroke-width="1.6" d="M2163,-52C2163,-52 1930,-52 1930,-52 1924,-52 1918,-46 1918,-40 1918,-40 1918,-28 1918,-28 1918,-22 1924,-16 1930,-16 1930,-16 2163,-16 2163,-16 2169,-16 2175,-22 2175,-28 2175,-28 2175,-40 2175,-40 2175,-46 2169,-52 2163,-52"/>
<text text-anchor="middle" x="2046.5" y="-37.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">Plan BNPL generado/ajustado</text>
<text text-anchor="middle" x="2046.5" y="-25.2" font-family="Inter, Segoe UI, Helvetica, Arial, sans-serif" font-size="11.00">1ª cuota D0/D+1 • débito automático/transferencia</text>
</g>
<!-- gestion&#45;&gt;plan -->
<g id="edge9" class="edge">
<title>gestion&#45;&gt;plan</title>
<path fill="none" stroke="black" d="M1882.27,-34C1890.51,-34 1898.91,-34 1907.34,-34"/>
<polygon fill="black" stroke="black" points="1907.61,-37.5 1917.61,-34 1907.61,-30.5 1907.61,-37.5"/>
</g>
</g>
</svg>
</div>
  <aside class="panel">
    <h2>Resumen</h2>
    <div class="card" id="details">Haz clic en los nodos para ver detalles. En el POS es <b>débito</b>; el split ocurre en el backend. La app muestra la <b>pantalla de éxito</b> y la gestión post‑compra.</div>
    <div class="card"><b>Controles</b><ul>
      <li>Preset: 100% BNPL, split, fallback.</li>
      <li>Plazo: 1–12x (default 3x) con tasa prefijada.</li>
      <li>Tap MP y tarjeta de débito física.</li>
    </ul></div>
  </aside>
</main>
<script>
const DETAILS = {
  preset_funding:`Define 100% BNPL, split con saldo (%) o fallback (usar BNPL si saldo insuficiente).`,
  preset_cuotas:`Elige 1–12x (default 3x), tasa prefijada y precio por $1,000.`,
  activar:`Activa Tap MP (NFC). También funciona con tarjeta de débito física.`,
  tap:`Cliente acerca el celular o la tarjeta a la terminal.`,
  debito:`Para el POS, siempre es débito (monto total).`,
  calc:`Calcula split y hace funding JIT (top‑up de la cuenta).`,
  auth:`Autoriza como Dinero en Cuenta hacia el POS.`,
  congrats:`Pantalla de éxito y recibo en la app.`,
  gestion:`Post‑compra: aumentar cuotas, prepagar, adelantar.`,
  plan:`Plan BNPL generado/ajustado (1ª D0/D+1; débito automático/transferencia).`,
};
document.querySelectorAll('svg .node').forEach(n=>{
  const id=n.id; if(!id) return; n.style.cursor='pointer';
  n.addEventListener('click',()=>{document.querySelectorAll('svg .node').forEach(x=>x.classList.remove('selected')); n.classList.add('selected');
  document.getElementById('details').innerHTML=DETAILS[id]||'Sin detalles.';});
});
</script>
</body>
</html>
